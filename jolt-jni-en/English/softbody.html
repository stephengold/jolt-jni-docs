<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>An introduction to soft-body physics :: The Jolt-JNI project</title>
    <link rel="canonical" href="https://stephengold.github.io/jolt-jni/jolt-jni-en/English/softbody.html">
    <link rel="prev" href="vehicle.html">
    <link rel="next" href="build.html">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../_/css/site.css">
<meta property="og:image" content="../../_/img/iconx128.png">
<meta property="og:description" content="An introduction to soft-body physics">
<meta property="og:title" content="The Jolt-JNI project">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://stephengold.github.io/jolt-jni">
        <img alt="" src="../../_/img/iconx128.png" width="32" type="image/x-icon" style="margin-right:16px">
        The Jolt-JNI project
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Color themes</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" onclick="setTheme('canyon')">Canyon</a>
            <a class="navbar-item" onclick="setTheme('dark')">Dark</a>
            <a class="navbar-item" onclick="setTheme('jungle')">Jungle</a>
            <a class="navbar-item" onclick="setTheme('light')">Light</a>
            <a class="navbar-item" onclick="setTheme('pastel')">Pastel</a>
            <a class="navbar-item" onclick="setTheme('phosphor')">Phosphor<a>
            <a class="navbar-item" style="padding-top: 5px;padding-left: 1px;padding-right: 1px;"></button>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="jolt-jni-en" data-version="English">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="overview.html">Project links</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="implementation.html">Implementation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Library tutorials</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="add.html">Add to existing project</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sport.html">Sport-Jolt visualization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="rigidbody.html">Rigid bodies</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="free.html">Freeing memory</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="debug.html">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="shape.html">Collision shapes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="constraint.html">Constraints</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="character.html">Characters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="vehicle.html">Vehicles</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="softbody.html">Soft bodies</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="build.html">Build procedures</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="demos.html">Demo apps</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="lexicon.html">Type lexicon</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="https://github.com/stephengold/jolt-jni">GitHub repository</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/jolt-jni/releases/latest">Latest release</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/jolt-jni/releases">Recent releases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/jolt-jni/blob/master/README.md">ReadMe file</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://raw.githubusercontent.com/stephengold/jolt-jni/master/LICENSE">License</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/jolt-jni/blob/master/release-log.md">Release log</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/jolt-jni/commits/master">Recent commits</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/jolt-jni/issues">Issue tracker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/jolt-jni/issues/new">Report an issue</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jolt JNI at other sites</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://repo1.maven.org/maven2/com/github/stephengold">Maven Central download</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://central.sonatype.com/search?q=jolt-jni&amp;namespace=com.github.stephengold">Maven Central search</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://jitpack.io/#stephengold/jolt-jni">JitPack (unofficial)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Projects using Jolt JNI</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/jolt-jni-docs">jolt-jni-docs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/sport-jolt">Sport-Jolt</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/kk-physics">KK Physics</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Other related projects</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://jrouwe.github.io/JoltPhysics">Jolt Physics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io/Libbulletjme">Libbulletjme</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/kmammou/v-hacd">V-HACD</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/stephengold/antora-ui-bundle">Website UI bundle</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">People</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://stephengold.github.io">Stephen Gold</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">The Jolt-JNI project</span>
    <span class="version">English</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">The Jolt-JNI project</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="overview.html">English</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle-label">Project links</span>
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="overview.html">The Jolt-JNI project</a></li>
    <li>Library tutorials</li>
    <li><a href="softbody.html">Soft bodies</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/stephengold/jolt-jni-docs/edit/master/docs/en/modules/ROOT/pages/softbody.adoc">Edit this page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">An introduction to soft-body physics</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>While rope, cloth, and foam rubber
can be simulated using many small rigid bodies,
it is more convenient and efficient to treat them
as a single body that can be deformed.
To this end, Jolt JNI supports simulation of <em>soft bodies</em>
in a manner roughly analogous to rigid bodies.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_a_comparison_of_soft_bodies_and_rigid_bodies"><a class="anchor" href="#_a_comparison_of_soft_bodies_and_rigid_bodies"></a>A comparison of soft bodies and rigid bodies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Unlike a rigid body, a soft body&#8217;s collision shape is only a placeholder.
The body is composed of point masses (called <em>vertices</em>) whose locations
are specified in system coordinates.
The body&#8217;s position, shape, and mass distribution
are all derived from its vertices.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To simulate rope, vertices can be connected in pairs (called <em>edges</em>).</p>
</li>
<li>
<p>To simulate cloth,
vertices can be connected to form triangles (called <em>faces</em>).</p>
</li>
<li>
<p>To simulate foam rubber,
vertices can be connected to form tetrahedra (called <em>volumes</em>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The location of a soft body is defined as
the center of its axis-aligned bounding box.</p>
</div>
<div class="paragraph">
<p>Soft bodies collide only with rigid bodies;
they do not collide with other soft bodies.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creation"><a class="anchor" href="#_creation"></a>Creation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To construct a soft body:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Instantiate and configure a <code>SoftBodySharedSettings</code> object.</p>
</li>
<li>
<p>Add vertices to the shared-settings object using <code>addVertex()</code>.</p>
</li>
<li>
<p>(Optional) Add faces to the shared settings using <code>addFace()</code>.</p>
</li>
<li>
<p>Add edges and volumes to the shared settings
using <code>addEdgeConstraint()</code> and <code>addVolumeConstraint()</code>.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Alternatively, you may use <code>createConstraints()</code>
to generate appropriate edges for the pre-existing faces.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Optimize the shared settings using <code>optimize()</code>.</p>
</li>
<li>
<p>Instantiate and configure a <code>SoftBodyCreationSettings</code> object
that incorporates the shared settings.</p>
</li>
<li>
<p>Create the body as you would a rigid body,
only using <code>createSoftBody()</code> instead of <code>createBody()</code>.</p>
</li>
<li>
<p>Like rigid bodies, soft bodies aren&#8217;t simulated
unless they&#8217;re added to a physics system.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Even though it&#8217;s possible to append individual vertices, edges, and faces
to a shared-settings object,
it&#8217;s often more convenient to generate a 3-D mesh with the desired shape
and then append that mesh to the shared settings.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Meshes intended for graphics rendering often prove
unsuitable for soft-body simulation.
For instance, they may define multiple vertices at the same position
or their edges/faces may be insufficiently subdivided.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For a simple example of a soft body, see
<a href="https://github.com/stephengold/jolt-jni-docs/blob/master/java-apps/src/main/java/com/github/stephengold/sportjolt/javaapp/sample/HelloSoftBody.java">HelloSoftBody</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_solver_iterations"><a class="anchor" href="#_solver_iterations"></a>Solver iterations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>During each simulation step, Jolt Physics applies
an iterative solver to update the vertex locations in each soft body.</p>
</div>
<div class="paragraph">
<p>The number of iterations is stored in the body&#8217;s motion properties.
You can improve accuracy by increasing the number of iterations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SoftBodyMotionProperties sbmp = (SoftBodyMotionProperties)body.getMotionProperties();
sbmp.setNumInterations(10);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compliance"><a class="anchor" href="#_compliance"></a>Compliance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each edge acts like a spring with specific "rest length" and <em>compliance</em>.
Compliance is the inverse of stiffness.</p>
</div>
<div class="paragraph">
<p>To simulate an object that flexes easily (such as cloth), create a soft
body with many faces and non-zero edge compliance.
A simple way to do this is to configure the vertex attributes
with the desired compliance and then
let <code>createConstraints()</code> calculate the lengths:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SoftBodySharedSettings sbss = /* ... */;
VertexAttributes[] vertexAttributes = /* ... */;
float stiffness = /* ... */;
for (int i = 0; i &lt; numVertices; ++i) {
    vertexAttributes[i] = new VertexAttributes();
    vertexAttributes[i].setShearCompliance(1f / stiffness);
}
sbss.createConstraints(vertexAttributes, EBendType.Distance);</code></pre>
</div>
</div>
<div class="paragraph">
<p>For a simple example of cloth simulation, see
<a href="https://github.com/stephengold/jolt-jni-docs/blob/master/java-apps/src/main/java/com/github/stephengold/sportjolt/javaapp/sample/HelloCloth.java">HelloCloth</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mass_distribution"><a class="anchor" href="#_mass_distribution"></a>Mass distribution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a vertex is appended to a shared-settings object, it has mass=1 by default.
To alter the mass of an existing vertex, use its <code>setInvMass()</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SoftBodySharedSettings sbss = /* ... */;
float mass = /* ... */;
Vertex vertex = sbss.getVertex(vertexIndex);
vertex.setInvMass(1f / mass);</code></pre>
</div>
</div>
<div class="paragraph">
<p>If a soft-body vertex has invMass=0,
it becomes <em>pinned</em> (immovable, like a static rigid body).</p>
</div>
<div class="paragraph">
<p>For a simple example of a pinned vertex, see
<a href="https://github.com/stephengold/jolt-jni-docs/blob/master/java-apps/src/main/java/com/github/stephengold/sportjolt/javaapp/sample/HelloPin.java">HelloPin.java</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_simulating_a_rope"><a class="anchor" href="#_simulating_a_rope"></a>Simulating a rope</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://github.com/stephengold/jolt-jni-docs/blob/master/java-apps/src/main/java/com/github/stephengold/sportjolt/javaapp/sample/HelloSoftRope.java">HelloSoftRope</a> is a Sport-Jolt app
that demonstrates one way to simulate rope using a soft body.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_summary"><a class="anchor" href="#_summary"></a>Summary</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Soft bodies are a convenient and efficient way to simulate
deformable objects.</p>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="vehicle.html">Vehicles</a></span>
  <span class="next"><a href="build.html">Build procedures</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Page contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>Copyright &copy; 2020&ndash;2025 by Stephen Gold</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
